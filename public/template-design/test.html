<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
	<input type="file" id="fileupload">
	<img src="#" alt="" id="test" style="display:none">
	<div id="drawing-area-1">
		<canvas id="canvas-a" height="300" width="600"></canvas>
	</div>
	<div id="drawing-area-2">
		<canvas id="canvas-b" height="300" width="600"></canvas>
	</div>

	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>	
	<script type="text/javascript" src="js/fabric.js"></script>
	<script>
		canvas = new fabric.Canvas('canvas-a', {
		  	hoverCursor: 'pointer',
		  	selection: true,
		  	selectionBorderColor:'black'
		});
		canvas2 = new fabric.Canvas('canvas-b', {
		  	hoverCursor: 'pointer',
		  	selection: true,
		  	selectionBorderColor:'black'
		});

		$('#fileupload').change(function(e){
	  		var src;
	  		if (this.files && this.files[0]) {
	            var reader = new FileReader();
	            
	            reader.onload = function (e) {	               
	                src = e.target.result;
	                $('#test').attr('src',src);

	                var offset = 50;
			        var left = 100;
			        var top = 300;
			        var angle = fabric.util.getRandomInt(-20, 40);
			        var width = fabric.util.getRandomInt(30, 50);
			        var opacity = (function(min, max){ return Math.random() * (max - min) + min; })(0.5, 1);
			        
			  		fabric.Image.fromURL($('#test').attr('src'), function(image) {
				        image.set({
				            left:100,
				            top:100,
				            angle: 0,
				            padding: 10,
				            cornersize: 10,
			      	  		hasRotatingPoint:true
				        });
				          //image.scale(getRandomNum(0.1, 0.25)).setCoords();
				        canvas.add(image);
				        canvas2.add(image);
				    });
	            }
	            
	            reader.readAsDataURL(this.files[0]);
	        }
	  	})	  
	</script>
</body>
</html>